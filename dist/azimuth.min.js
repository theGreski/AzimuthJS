((e,t)=>{"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).azimuth=t()})(this,function(){let b=6371009;function M(e){if("number"!=typeof e||isNaN(e))throw new Error("Input to deg2rad must be a valid number.");return e*(Math.PI/180)}function d(e){if("number"!=typeof e||isNaN(e))throw new Error("Input to rad2deg must be a valid number.");return e*(180/Math.PI)}function p(e,t=0){return Number(Math.round(Number(e)+"e+"+t)+"e-"+t)}return function(e,t,{units:r="m",distancePrecision:n=0,formula:a="great-circle",bearingPrecision:i=0,directionPrecision:o=2}={}){if("object"!=typeof e||null===e||"number"!=typeof e.lat||"number"!=typeof e.lng)throw new Error("First parameter must be an object with numeric 'lat' and 'lng' properties.");if("object"!=typeof t||null===t||"number"!=typeof t.lat||"number"!=typeof t.lng)throw new Error("Second parameter must be an object with numeric 'lat' and 'lng' properties.");if(90<Math.abs(e.lat)||90<Math.abs(t.lat))throw new Error("Latitude must be between -90 and 90 degrees.");if(180<Math.abs(e.lng)||180<Math.abs(t.lng))throw new Error("Longitude must be between -180 and 180 degrees.");if([[n,"distancePrecision"],[i,"bearingPrecision"],[o,"directionPrecision"]].forEach(([e,t])=>{if("number"!=typeof e||isNaN(e))throw new Error(`Parameter '${t}' must be a valid number.`)}),![n,i].every(e=>Number.isInteger(e)&&0<=e&&e<=15))throw new Error("Precision parameters must be integers between 0 and 15.");if(!["m","km","ft","yd","mi","nm"].includes(r))throw new Error("Units parameter type not supported!");if(!["great-circle","rhumb-line"].includes(a))throw new Error("Calculation formula type parameter not supported!");if(!Number.isInteger(o)||o<0||3<o)throw new Error("Direction precision must be an integer between 0 and 3.");var s,u,h,l,m={},c=p(((e,t="m")=>{if("m"===t)return e;switch(t){case"km":return.001*e;case"ft":return 3.28084*e;case"yd":return 1.0936*e;case"mi":return 621371e-9*e;case"nm":return 539957e-9*e;default:return e}})("rhumb-line"===a?((e,t,r,n)=>{if(e===r&&t===n)return 0;var a=M(e),i=M(r),r=M(r-e);const o=M(n-t);return e=Math.log(Math.tan(Math.PI/4+i/2)/Math.tan(Math.PI/4+a/2)),n=1e-11<Math.abs(e)?r/e:Math.cos(a),Math.abs(o)>Math.PI&&(o=0<o?-(2*Math.PI-o):2*Math.PI+o),t=Math.sqrt(r*r+n*n*o*o)*b})(e.lat,e.lng,t.lat,t.lng):(h=e.lat,f=e.lng,c=t.lat,l=t.lng,h===c&&f===l?0:(s=M(h),u=M(c),c=M(c-h),h=M(l-f),l=Math.sin(c/2)*Math.sin(c/2)+Math.cos(s)*Math.cos(u)*Math.sin(h/2)*Math.sin(h/2),f=2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)),b*f)),r),n),f=(m.distance=c,m.units=r,0===c?"":p("rhumb-line"===a?((e,t,r,n)=>{if(e===r&&t===n)return 0;e=M(e),r=M(r);let a=M(n-t);return n=Math.log(Math.tan(Math.PI/4+r/2)/Math.tan(Math.PI/4+e/2)),Math.abs(a)>Math.PI&&(a=0<a?-(2*Math.PI-a):2*Math.PI+a),(d(t=Math.atan2(a,n))+360)%360})(e.lat,e.lng,t.lat,t.lng):(s=e.lat,u=e.lng,h=t.lat,l=t.lng,s=M(s),h=M(h),l=M(l-u),u=Math.sin(l)*Math.cos(h),s=Math.cos(s)*Math.sin(h)-Math.sin(s)*Math.cos(h)*Math.cos(l),(d(Math.atan2(u,s))+360)%360),i));return m.bearing=f,m.formula=a,0!==o&&(m.direction=0===c?"":((e,t)=>{if("number"!=typeof e||isNaN(e))throw new Error("Degrees parameter is not a valid number!");if("number"!=typeof t||isNaN(t))throw new Error("Precision parameter is not a valid number!");if(e<0||360<e)throw new Error("Degrees parameter outside of range (0-360)!");if(t<1||3<t)throw new Error("Precision parameter outside of range (1-3)!");360===e&&(e=0);var r=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"];let n=3===t?16:2===t?8:4;var t=360/n,a=r.length/n;let i=Math.round(e/t)*a;return r[i=i>=r.length?0:i]})(f,o)),m}});