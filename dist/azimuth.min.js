(function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):(a=a||self,a.azimuthjs=b())})(this,function(){var b=Math.sqrt,d=Math.cos,e=Math.sin,f=Math.atan2,g=Math.abs,h=Math.log,i=Math.tan,j=Math.round,k=Math.PI;function l(a){throw new TypeError("\""+a+"\" is read-only")}function m(a){if("number"!=typeof a||isNaN(a))throw new Error("Input to deg2rad must be a valid number.");return a*(k/180)}function n(a){if("number"!=typeof a||isNaN(a))throw new Error("Input to rad2deg must be a valid number.");return a*(180/k)}function o(a,b){return void 0===b&&(b=0),+(j(+a+"e+"+b)+"e-"+b)}function p(a,b,c,d){if(a===c&&b===d)return 0;var e=m(a),j=m(c),l=m(d-b),o=h(i(k/4+j/2)/i(k/4+e/2));g(l)>k&&(l=0<l?-(2*k-l):2*k+l);var p=f(l,o),q=(n(p)+360)%360;return q}function q(a,b,c,g){var h=m(a),i=m(c),j=m(g-b),k=e(j)*d(i),l=d(h)*e(i)-e(h)*d(i)*d(j),o=f(k,l),p=(n(o)+360)%360;return p}function r(a,b){if("number"!=typeof a||isNaN(a))throw new Error("Degrees parameter is not a valid number!");if("number"!=typeof b||isNaN(b))throw new Error("Precision parameter is not a valid number!");if(0>a||360<a)throw new Error("Degrees parameter outside of range (0-360)!");if(1>b||3<b)throw new Error("Precision parameter outside of range (1-3)!");360===a&&(a=0);var c=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"],d=4;2===b&&(d=8),3===b&&(d=16);var e=360/d,f=c.length/d,g=j(a/e)*f;return g>=c.length&&(g=0),c[g]}function s(g,h,i,j){if(g===i&&h===j)return 0;var k=m(g),l=m(i),n=m(i-g),o=m(j-h),p=e(n/2)*e(n/2)+d(k)*d(l)*e(o/2)*e(o/2),a=2*f(b(p),b(1-p));return 6371009*a}function t(a,c,e,f){if(a===e&&c===f)return 0;var j=m(a),n=m(e),o=m(e-a),p=m(f-c),r=h(i(k/4+n/2)/i(k/4+j/2)),s=1e-11<g(r)?o/r:d(j);g(p)>k&&l("dLong");var q=b(o*o+s*s*p*p)*6371009;return q}function u(a,b){return(void 0===b&&(b="m"),"m"===b)?a:"km"===b?.001*a:"ft"===b?3.28084*a:"yd"===b?1.0936*a:"mi"===b?621371e-9*a:"nm"===b?539957e-9*a:a}return function(a,b,c){var d=Number.isInteger,e=void 0===c?{}:c,f=e.units,h=void 0===f?"m":f,i=e.distancePrecision,j=void 0===i?0:i,k=e.formula,l=void 0===k?"great-circle":k,m=e.bearingPrecision,n=void 0===m?0:m,v=e.directionPrecision,w=void 0===v?2:v;if("object"!=typeof a||null===a||"number"!=typeof a.lat||"number"!=typeof a.lng)throw new Error("First parameter must be an object with numeric 'lat' and 'lng' properties.");if("object"!=typeof b||null===b||"number"!=typeof b.lat||"number"!=typeof b.lng)throw new Error("Second parameter must be an object with numeric 'lat' and 'lng' properties.");if(90<g(a.lat)||90<g(b.lat))throw new Error("Latitude must be between -90 and 90 degrees.");if(180<g(a.lng)||180<g(b.lng))throw new Error("Longitude must be between -180 and 180 degrees.");if([[j,"distancePrecision"],[n,"bearingPrecision"],[w,"directionPrecision"]].forEach(function(a){var b=a[0],c=a[1];if("number"!=typeof b||isNaN(b))throw new Error("Parameter '"+c+"' must be a valid number.")}),![j,n].every(function(a){return d(a)&&0<=a&&15>=a}))throw new Error("Precision parameters must be integers between 0 and 15.");if(!["m","km","ft","yd","mi","nm"].includes(h))throw new Error("Units parameter type not supported!");if(!["great-circle","rhumb-line"].includes(l))throw new Error("Calculation formula type parameter not supported!");if(!d(w)||0>w||3<w)throw new Error("Direction precision must be an integer between 0 and 3.");var x={},y=o(u("rhumb-line"===l?t(a.lat,a.lng,b.lat,b.lng):s(a.lat,a.lng,b.lat,b.lng),h),j);x.distance=y,x.units=h;var z=0===y?"":o("rhumb-line"===l?p(a.lat,a.lng,b.lat,b.lng):q(a.lat,a.lng,b.lat,b.lng),n);return x.bearing=z,x.formula=l,0!==w&&(x.direction=0===y?"":r(z,w)),x}});